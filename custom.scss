/*-- scss:defaults --*/

// Import Google Fonts
@import url('https://fonts.googleapis.com/css2?family=Geist:wght@400;500;600&family=JetBrainslet+Mono:wght@400;500&family=Instrument+Serif:ital@0;1&display=swap');

// Radix Color Scales
// Mauve (gray scale - purple tint)
$mauve-1: #fdfcfd;
$mauve-2: #faf9fb;
$mauve-3: #f2eff3;
$mauve-4: #eae7ec;
$mauve-5: #e3dfe6;
$mauve-6: #dbd8e0;
$mauve-7: #d0cdd7;
$mauve-8: #bcbac7;
$mauve-9: #8e8c99;
$mauve-10: #84828e;
$mauve-11: #65636d;
$mauve-12: #211f26;

// Semantic mappings - monochrome approach
// Links same as text, underlined. Color only for active states.
$background: $mauve-1;
$foreground: $mauve-12;
$muted: $mauve-3;
$muted-foreground: $mauve-11;
$border: $mauve-6;
$accent: $mauve-12;           // Links same as text
$accent-hover: $mauve-9;      // Subtle hover
$active: $mauve-12;           // Active states use foreground

// Bootstrap mappings
$body-bg: $mauve-1;
$body-color: $foreground;
$text-muted: $muted-foreground;
$border-color: $border;
$link-color: $foreground;
$link-hover-color: $muted-foreground;

// Font stacks
$font-family-sans-serif: 'Inter', system-ui, sans-serif;
$font-family-monospace: 'JetBrains Mono', 'Geist Mono', ui-monospace, monospace;
$headings-font-family: 'Instrument Serif', Georgia, serif;

// Radix Typography Scale (9 steps)
// Step 1: 12px, Step 2: 14px, Step 3: 16px, Step 4: 18px, Step 5: 20px
// Step 6: 24px, Step 7: 28px, Step 8: 35px, Step 9: 60px
$radix-1: 0.75rem;    // 12px
$radix-2: 0.875rem;   // 14px
$radix-3: 1rem;       // 16px
$radix-4: 1.125rem;   // 18px
$radix-5: 1.25rem;    // 20px
$radix-6: 1.5rem;     // 24px
$radix-7: 1.75rem;    // 28px
$radix-8: 2.1875rem;  // 35px
$radix-9: 3.75rem;    // 60px

// Typography - using Radix step 2 (14px) as base
$font-size-root: 16px;  // Browser default
$font-size-base: $radix-3;
$line-height-base: 1.6;
$font-size-sm: $radix-2;

// Headings - using Radix scale
$h1-font-size: $radix-9;   // 35px
$h2-font-size: $radix-6;   // 24px
$h3-font-size: $radix-5;   // 20px
$h4-font-size: $radix-4;   // 18px
$h5-font-size: $radix-3;   // 16px
$h6-font-size: $radix-2;   // 14px
$headings-font-weight: 400;
$headings-line-height: 1.25;

// Code - Radix step 2
$code-font-size: $radix-2;
$pre-bg: $muted;
$pre-border-radius: 0.5rem;

// Border radius
$border-radius: 0.5rem;
$border-radius-sm: 0.375rem;

/*-- scss:rules --*/

// Base
body {
  -webkit-font-smoothing: antialiased;
}

// Headings - serif
h1, h2, h3, h4, h5, h6 {
  font-family: $headings-font-family;
  letter-spacing: -0.02em;
}

h1 { margin-bottom: 1rem; }
h2 { margin-top: 2.5rem; margin-bottom: 1rem; }
h3 { margin-top: 2rem; margin-bottom: 0.75rem; }

// Links - underlined by default, monochrome
a {
  text-decoration: underline;
  text-decoration-color: $mauve-7;
  text-underline-offset: 2px;
  &:hover {
    text-decoration-color: $foreground;
  }
}

// Code
code {
  padding: 0.125em 0.375em;
  background: $muted;
  border-radius: $border-radius-sm;
  font-size: 0.875em;
}
pre {
  padding: 1rem;
  code { padding: 0; background: transparent; }
}

// ===========================================
// LEFT SIDEBAR (Navigation)
// ===========================================

.sidebar-navigation {
  font-size: $radix-5;
  border-right: 1px solid $border;
}

// Site title
.sidebar-title {
  font-family: $font-family-sans-serif;
  font-size: $radix-4;
  font-weight: 600;
  color: $foreground;
  padding: 0.5rem 0;
}

// Menu items
.sidebar-menu-container {
  .sidebar-item {
    margin: 0;
    line-height: 0.875rem;
  }

  // Regular links - clean, with subtle background highlight for active
  .sidebar-item-text {
    font-size: $radix-2;
    color: $muted-foreground;
    padding: 0.5rem 0.75rem;
    margin: 0.125rem 0;
    border-radius: $border-radius;
    text-decoration: none;
    transition: all 0.15s ease;
    background: transparent;

    &:hover {
      color: $foreground;
      background: $mauve-3;
    }

    &.active {
      color: $mauve-12;
      background: $mauve-4;
      font-weight: 500;
    }
  }

  // Section headers
  .sidebar-item-section > .sidebar-item-container > .sidebar-item-text {
    font-size: $radix-1;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: $foreground;
    padding-top: 1.5rem;
    padding-bottom: 0.5rem;
    background: transparent;

    &:hover {
      color: $foreground !important;
      background: transparent !important;
    }
  }

  // Section toggle button
  .sidebar-item-toggle {
    color: $muted-foreground;
    opacity: 0.6;
    &:hover { opacity: 1; }
  }

  // Nested items - no border, just indent
  .sidebar-section {
    padding-left: 0;
    margin-left: 0;
    border-left: none;
  }
}

// ===========================================
// RIGHT SIDEBAR (On this page / TOC)
// ===========================================

#TOC {
  font-size: $radix-2;
  line-height: 1.6;
  border-left: 1px solid $border;
  padding-left: 1rem;

  // Header - "On this page"
  #toc-title {
    font-family: $font-family-sans-serif;
    font-size: $radix-1 !important;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: $foreground;
    margin-bottom: 0.75rem;
  }

  ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .nav-link {
    display: block;
    padding: 0.25rem 0;
    padding-left: 0.75rem;
    margin-left: -1rem;
    color: $muted-foreground;
    text-decoration: none;
    border-left: 2px solid transparent;
    transition: all 0.15s ease;

    &:hover {
      color: $foreground;
    }

    &.active {
      color: $foreground;
      border-left-color: $foreground;
    }
  }
}

// View source link
.toc-actions {
  margin-top: 1.5rem;
  padding-top: 1rem;
  border-top: 1px solid $border;

  a {
    font-size: $radix-2;
    color: $muted-foreground;
    text-decoration: none;
    &:hover { color: $foreground; }
  }
}

// ===========================================
// LAYOUT
// ===========================================

// Prose stays readable width, charts expand
.content {
  p, ul, ol, blockquote, dl { max-width: 75ch; }

  // Charts/figures use full width
  .cell-output-display,
  .plotly,
  .js-plotly-plot,
  figure,
  pre,
  table {
    max-width: 100%;
    width: 100%;
  }
}

// Tables
th {
  font-weight: 600;
  font-size: $radix-1;
  color: $foreground;
  text-align: left;
}

td {
  font-size: $radix-2;
}

::selection {
  background: $mauve-5;
}

// ===========================================
// RESPONSIVE - Zod-style collapse behavior
// Right sidebar disappears first, then left
// ===========================================

// Hide right sidebar (TOC) first - below 1280px
@media (max-width: 1280px) {
  .margin-sidebar {
    display: none !important;
  }
}

// Hide left sidebar below 768px
@media (max-width: 768px) {
  .sidebar-navigation {
    display: none;
  }

  #quarto-content {
    margin-left: 0 !important;
  }
}
